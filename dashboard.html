<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Syndicate | Dashboard</title>
    <style>
        :root {
            --apple-blue: #0071e3;
            --bg-light: #f5f5f7;
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.5);
            --text-main: #1d1d1f;
            --text-sub: #424245;
            --success: #34c759;
        }

        body {
            margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: radial-gradient(circle at top right, #e2e2e7, #f5f5f7);
            color: var(--text-main); display: flex; min-height: 100vh;
            font-size: 22px;
        }

        /* SIDEBAR - XXL & STABLE */
        .sidebar {
            width: 320px; background: var(--glass-bg); backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px); border-right: 1px solid var(--glass-border);
            display: flex; flex-direction: column; padding: 50px 30px; position: fixed; height: 100vh; box-sizing: border-box; z-index: 1000;
        }
        .sidebar h2 { font-size: 28px; font-weight: 800; margin-bottom: 60px; letter-spacing: 1px; }
        
        .nav-container { display: flex; flex-direction: column; flex-grow: 1; }

        .nav-item { 
            padding: 20px; margin-bottom: 15px; border-radius: 18px; 
            color: var(--text-sub); font-size: 20px; text-decoration: none; 
            cursor: pointer; border: none; background: transparent; text-align: left; width: 100%;
            transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); font-weight: 500;
        }
        .nav-item.active { background: rgba(0, 113, 227, 0.1); color: var(--apple-blue); font-weight: 700; }
        .nav-item:hover:not(.active) { background: rgba(0, 0, 0, 0.05); transform: translateX(8px); }

        .logout-btn {
            margin-top: auto; color: #ff3b30 !important; border: 2px solid rgba(255, 59, 48, 0.2) !important;
            font-weight: 700 !important; text-align: center !important; cursor: pointer; border-radius: 18px; padding: 15px;
            background: transparent; font-size: 20px; transition: 0.3s;
        }
        .logout-btn:hover { background: rgba(255, 59, 48, 0.1); }

        /* MAIN CONTENT - MAX SCALE */
        .main-content { margin-left: 320px; padding: 80px; flex-grow: 1; max-width: 1400px; width: 100%; box-sizing: border-box; }

        .tab-content { display: none; animation: fadeIn 0.6s cubic-bezier(0.23, 1, 0.32, 1); }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        /* STATS CARDS */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 40px; margin: 50px 0; }
        .stat-card { 
            background: var(--glass-bg); backdrop-filter: blur(20px);
            padding: 45px; border-radius: 40px; border: 1px solid var(--glass-border);
            box-shadow: 0 15px 50px rgba(0,0,0,0.05);
        }
        .stat-card h3 { font-size: 16px; text-transform: uppercase; color: var(--text-sub); margin: 0; letter-spacing: 2px; font-weight: 700; }
        .stat-card p { font-size: 48px; font-weight: 800; margin-top: 20px; margin-bottom: 0; letter-spacing: -1px; }

        /* LEARNING PANEL */
        .glass-panel {
            background: var(--glass-bg); backdrop-filter: blur(50px);
            padding: 80px; border-radius: 50px; border: 1px solid var(--glass-border);
            box-shadow: 0 40px 80px rgba(0,0,0,0.08);
        }

        .step-label { font-size: 16px; font-weight: 800; color: var(--apple-blue); text-transform: uppercase; margin-bottom: 20px; display: block; letter-spacing: 2px; }
        .mission-box { background: rgba(255,255,255,0.6); padding: 40px; border-radius: 35px; margin: 35px 0; border: 1px solid rgba(0,0,0,0.05); }
        
        .image-gallery { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 30px 0; }
        .image-gallery img { width: 100%; border-radius: 20px; border: 2px solid var(--glass-border); box-shadow: 0 10px 30px rgba(0,0,0,0.1); }

        .next-btn {
            background: var(--apple-blue); color: white; border: none; padding: 25px 70px;
            border-radius: 25px; font-weight: 700; cursor: pointer; transition: 0.4s;
            box-shadow: 0 15px 35px rgba(0, 113, 227, 0.3); font-size: 22px;
        }
        .back-btn {
            background: transparent; color: var(--text-sub); border: 2px solid #d2d2d7; padding: 25px 50px;
            border-radius: 25px; font-weight: 700; cursor: pointer; font-size: 22px;
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2>■ SYNDICATE</h2>
        <div class="nav-container">
            <button class="nav-item active" onclick="showTab('dashboard', this)">Dashboard</button>
            <button class="nav-item" onclick="showTab('learning', this)">Masterclass</button>
            <button class="nav-item">Assets</button>
            <button onclick="handleLogout()" class="logout-btn">Abmelden</button>
        </div>
    </div>

    <div class="main-content">
        <div id="dashboard" class="tab-content active">
            <h1 style="font-size: 70px; letter-spacing: -4px; margin-top: 0; margin-bottom: 20px;">Willkommen, <span id="userName">User</span></h1>
            <div class="stats-grid">
                <div class="stat-card"><h3>Aktuelle Earnings</h3><p style="color: var(--success);">$<span id="userBalance">0.00</span></p></div>
                <div class="stat-card"><h3>Testphase</h3><p>Tag <span id="dayNum">1</span> / 5</p></div>
                <div class="stat-card"><h3>Dein Invite-Code</h3><p id="myCode" style="color: var(--apple-blue);">---</p></div>
            </div>
            <div class="glass-panel" style="text-align: center;">
                <h2 style="font-size: 40px;">Starte deine Sourcing Mission</h2>
                <button class="next-btn" style="margin-top: 30px;" onclick="document.querySelector('[onclick*=\'learning\']').click()">Training öffnen</button>
            </div>
        </div>

        <div id="learning" class="tab-content">
            <h1 style="font-size: 60px; letter-spacing: -3px; margin-bottom: 50px;">Strategie & Akquise</h1>
            <div class="glass-panel">
                <div id="learning-stage"></div>
                <div style="margin-top: 60px; display: flex; justify-content: space-between; align-items: center; border-top: 2px solid rgba(0,0,0,0.05); padding-top: 50px;">
                    <button class="back-btn" id="backBtn" onclick="prevLesson()" style="visibility: hidden;">← Zurück</button>
                    <button class="next-btn" id="nextBtn" onclick="nextLesson()">Nächste Phase →</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAYO0J1GWXIowL0c2mu4x8h6k5R6BVG26U",
            authDomain: "syndicate-protocol-48f8c.firebaseapp.com",
            projectId: "syndicate-protocol-48f8c",
            storageBucket: "syndicate-protocol-48f8c.firebasestorage.app",
            messagingSenderId: "47535029358",
            appId: "1:47535029358:web:9990ca7fad4f0ed72bba7f"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let currentStep = 1;
        const lessonData = {
            1: {
                label: "Phase 1: Das Fundament",
                title: "Mission & Invite-Code",
                html: `
                    <p style="font-size:26px;">Willkommen zur <b>5-Day Cash Flow Challenge</b>. Deine Aufgabe ist es, Leads zu identifizieren und sie erfolgreich in unser Protokoll einzuführen.</p>
                    <div class="mission-box">
                        <p style="font-size:24px; line-height:1.6;"><b>Die Invite-Code Logik:</b> Dein Code ist dein digitaler Fingerabdruck. Er ist der einzige Weg, wie das System deine Verkäufe erkennt. Jedes Mal, wenn ein neuer Nutzer über deinen Link oder Code beitritt, wird er lebenslang deinem Profil zugeordnet.</p>
                        <p style="font-size:22px; color:var(--apple-blue);">Stelle sicher, dass jeder Lead deinen Code nutzt, um deine Provision zu sichern.</p>
                    </div>`
            },
            2: {
                label: "Phase 2: Target Sourcing",
                title: "Hochwertige Zielgruppen identifizieren",
                html: `
                    <p style="font-size:26px;">Um maximale Ergebnisse zu erzielen, musst du dort präsent sein, wo Menschen aktiv nach Einkommenslösungen suchen.</p>
                    <div class="image-gallery">
                        <img src="Screenshot 2025-12-23 120115.png" alt="Cleaning Groups">
                        <img src="Screenshot 2025-12-23 120226.png" alt="Online Jobs">
                    </div>
                    <p style="font-size:20px; color:var(--apple-blue); font-weight:600; text-align:center;">Beispiele für Facebook-Gruppen mit hoher Lead-Dichte (Cleaning, Online Jobs, Remote Work).</p>
                    
                    <div class="mission-box">
                        <h4 style="font-size:24px; margin-top:0;">Strategische Akquise-Methoden:</h4>
                        <ul style="font-size:22px; line-height:1.8;">
                            <li><b>Nischen-Mining:</b> Tritt Gruppen bei, die nichts direkt mit "Make Money Online" zu tun haben (z.B. lokale Dienstleistungsgruppen), da dort der Wettbewerb geringer ist.</li>
                            <li><b>Engagement-Intercept:</b> Suche nach verzweifelten Kommentaren unter Beiträgen von bekannten Coaches und biete eine diskrete Lösung an.</li>
                            <li><b>Cross-Platform Outreach:</b> Nutze LinkedIn, um gezielt Personen mit dem Status "Suche Job" im Bereich Sales anzusprechen.</li>
                            <li><b>Instagram DM-Funnels:</b> Nutze Story-Umfragen bei relevanten Nischen-Accounts, um Interessenten direkt in den Chat zu holen.</li>
                        </ul>
                    </div>`
            },
            3: { label: "Phase 3", title: "Kommunikation", html: "<p style='font-size:26px;'>Hier folgen die Outreach-Skripte...</p>" },
            4: { label: "Phase 4", title: "Trial Onboarding", html: "<p style='font-size:26px;'>Hier folgt die Anleitung für den $5 Abschluss...</p>" },
            5: { label: "Phase 5", title: "Netzwerk Skalierung", html: "<p style='font-size:26px;'>Werde zum Ultra-Client.</p>" }
        };

        window.nextLesson = () => { if(currentStep < 5) { currentStep++; renderLesson(); window.scrollTo(0,0); } };
        window.prevLesson = () => { if(currentStep > 1) { currentStep--; renderLesson(); window.scrollTo(0,0); } };

        function renderLesson() {
            const data = lessonData[currentStep];
            document.getElementById('learning-stage').innerHTML = `
                <span class="step-label">${data.label}</span>
                <h2 style="font-size:55px; margin: 20px 0 40px 0;">${data.title}</h2>
                ${data.html}`;
            document.getElementById('backBtn').style.visibility = currentStep === 1 ? 'hidden' : 'visible';
            document.getElementById('nextBtn').innerText = currentStep === 5 ? "Abschließen" : "Nächste Phase →";
        }

        renderLesson();

        window.showTab = (tabId, btn) => {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            btn.classList.add('active');
        };

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                const userDoc = await getDoc(doc(db, "members", user.uid));
                if (userDoc.exists()) {
                    const data = userDoc.data();
                    document.getElementById('userName').innerText = data.firstName || "User";
                    document.getElementById('userBalance').innerText = (data.balance || 0).toFixed(2);
                    document.getElementById('myCode').innerText = data.myInviteCode || "N/A";
                }
            } else { window.location.href = "login.html"; }
        });

        window.handleLogout = () => signOut(auth).then(() => window.location.href = "login.html");
    </script>
</body>
</html>
